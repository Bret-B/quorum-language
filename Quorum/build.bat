REM !/bin/sh
REM This script builds Quorum from Source.

REM !/bin/sh
REM This script builds Quorum from Source. Must have Quorum 7 or above installed
REM using the standard installer or otherwise on the path.
echo "Cleaning and Building."
rmdir /s /q Run
rmdir /s /q Build
mkdir Run
mkdir Build

echo "Finished."
cd SourceCode


call quorum -compile main.quorum Compiler/Lexer.quorum Compiler/CompilerListener.quorum Hints/SetterGenerationHint.quorum Hints/GetterGenerationHint.quorum Compiler/Token.quorum Documentation/Documentation.quorum Documentation/DocumentationGenerator.quorum Contexts/ParenthesisContext.quorum Contexts/NormalAssignmentContext.quorum Contexts/UnaryMinusContext.quorum Contexts/NumberContext.quorum Contexts/ActionContext.quorum Contexts/QualifiedNameContext.quorum Contexts/OutputContext.quorum Contexts/UseContext.quorum Contexts/DocumentationContext.quorum Contexts/AdditionContext.quorum Contexts/AlertContext.quorum Contexts/ActionsNoClassContext.quorum Contexts/FullClassDeclarationContext.quorum Contexts/MeVariableAccessContext.quorum Contexts/PackageContext.quorum Contexts/ReturnContext.quorum Contexts/BooleanContext.quorum Contexts/BlockContext.quorum Contexts/TextContext.quorum Contexts/InheritStatementsContext.quorum Contexts/NoActionsNoClassContext.quorum Contexts/InputContext.quorum Contexts/ActionCallContext.quorum Contexts/ParentVariableFunctionCallContext.quorum Contexts/NoClassDeclarationContext.quorum Contexts/NotContext.quorum Contexts/IsContext.quorum Contexts/InheritStatementContext.quorum Contexts/NoClassStatementsContext.quorum Contexts/IfContext.quorum Contexts/GenericDeclarationContext.quorum Contexts/AccessModifierContext.quorum Contexts/AlwaysStatementContext.quorum Contexts/ConstructorContext.quorum Contexts/StartContext.quorum Contexts/ClassStatementsContext.quorum Contexts/VariableFunctionCallContext.quorum Contexts/ParentFieldAccessContext.quorum Contexts/IntegerContext.quorum Contexts/ClassTypeContext.quorum Contexts/CheckContext.quorum Contexts/InequalityContext.quorum Contexts/EqualsContext.quorum Contexts/SayContext.quorum Contexts/StatementContext.quorum Contexts/DetectStatementContext.quorum Contexts/GenericContext.quorum Contexts/AndOrContext.quorum Contexts/NoTypeAssignmentContext.quorum Contexts/ParseContext.quorum Contexts/UndefinedContext.quorum Contexts/ActionExpressionListContext.quorum Contexts/ObjectAssignmentContext.quorum Contexts/AssignmentDeclaractionContext.quorum Contexts/ParentAssignmentContext.quorum Contexts/MultiplicationContext.quorum Contexts/ParentCallContext.quorum Contexts/FormalParameterContext.quorum Contexts/LoopContext.quorum Contexts/MeContext.quorum CompilerTestSuite.quorum Tests/BigIntegerTester.quorum Tests/ByteArrayTester.quorum Tests/TypeCheckTesterGenerated.quorum Tests/BitwiseTester.quorum Tests/SeparatedValueTester.quorum Tests/ExpressionsTester.quorum Tests/ActionsTester.quorum Tests/RandomTester.quorum Tests/MatrixTester.quorum Tests/TypeCheckTester.quorum Tests/StackTester.quorum Tests/CompilerTestResult.quorum Tests/JsonTester.quorum Tests/InheritanceTester.quorum Tests/ExceptionTester.quorum Tests/ListTester.quorum Tests/QueueTester.quorum Tests/TemplatingTesterGenerated.quorum Tests/FilesTester.quorum Tests/TemplatingTester.quorum Tests/DecompresserTester.quorum Tests/TableTester.quorum Tests/LoopsTester.quorum Tests/HashTableTester.quorum Tests/ChainingTester.quorum Tests/ArrayTester.quorum Tests/IfStatementTester.quorum Tests/UsePackageTester.quorum Tests/MathTester.quorum Completion/CodeCompletionRequest.quorum Completion/CodeCompletionItem.quorum Completion/CodeCompletionResult.quorum Completion/CodeCompletionHandler.quorum Bytecode/JavaBytecodeMethodWriter.quorum Bytecode/QuorumBytecodeListener.quorum Bytecode/JavaBytecodeOpcodes.quorum Bytecode/JavaBytecodeLabel.quorum Bytecode/QuorumJavascriptListener.quorum Bytecode/QuorumBytecodeConverter.quorum Bytecode/JarGenerator.quorum Bytecode/QuorumSourceListener.quorum Bytecode/JavaBytecodeFieldWriter.quorum Bytecode/JavaBytecodeClassWriter.quorum Symbols/TypeChecker.quorum Symbols/ActionCallResolution.quorum Symbols/SymbolTable.quorum Symbols/InferenceResult.quorum Symbols/Symbol.quorum Symbols/TypeCheckResult.quorum Symbols/Dependency.quorum Symbols/Action.quorum Symbols/Class.quorum Symbols/Type.quorum Symbols/Location.quorum Symbols/HashListIterator.quorum Symbols/GenericResolution.quorum Symbols/QualifiedName.quorum Symbols/NavigationBar.quorum Symbols/Source.quorum Symbols/ErrorBlockLabels.quorum Symbols/TypeConversionConstants.quorum Symbols/AlwaysBlockResource.quorum Symbols/ActionCall.quorum Symbols/Block.quorum Symbols/TypeConversionPoints.quorum Symbols/Variable.quorum Symbols/ClassAttribute.quorum Library.quorum Compiler/Parser.quorum Compiler/CompilerRequest.quorum Compiler/CompilerProfiler.quorum Compiler/CompilerErrorType.quorum Compiler/CompilerErrorManager.quorum Compiler/CompilerError.quorum Compiler/CompilerResult.quorum Compiler/Compiler.quorum Hints/UseHint.quorum Hints/AddReturnTypeHint.quorum Hints/Hint.quorum Opcodes/Operation.quorum Opcodes/Structures/BlockOpcode.quorum Opcodes/Structures/ClassOpcode.quorum Opcodes/Casts/TextToBooleanCast.quorum Opcodes/Casts/IntegerToTextCast.quorum Opcodes/Casts/NumberPrimitiveToObjectCast.quorum Opcodes/Casts/BooleanToTextOpcode.quorum Opcodes/Casts/ExplicitCastOpcode.quorum Opcodes/Casts/BooleanToNumberCast.quorum Opcodes/Casts/ObjectToPrimitiveBooleanCast.quorum Opcodes/Casts/IntegerPrimitiveToObjectCast.quorum Opcodes/Casts/CastContext.quorum Opcodes/Casts/IntegerPrimitiveToNumberObjectCast.quorum Opcodes/Casts/BooleanObjectToBooleanPrimitiveCast.quorum Opcodes/Casts/IntegerToBooleanCast.quorum Opcodes/Casts/NumberObjectToNumberPrimitiveCast.quorum Opcodes/Casts/AutoBoxReverseOpcode.quorum Opcodes/Casts/NumberToBooleanCast.quorum Opcodes/Casts/NumberToIntegerCast.quorum Opcodes/Casts/BooleanToTextCast.quorum Opcodes/Casts/ObjectToPrimitiveIntegerCast.quorum Opcodes/Casts/TextPrimitiveToTextObjectCast.quorum Opcodes/Casts/BooleanPrimitiveToObjectCast.quorum Opcodes/Casts/ObjectToPrimitiveNumberCast.quorum Opcodes/Casts/IntegerPrimitiveToIntegerObjectCast.quorum Opcodes/Casts/CastOpcode.quorum Opcodes/Casts/TextToNumberCast.quorum Opcodes/Casts/NumberPrimitiveToNumberObjectCast.quorum Opcodes/Casts/NumberToTextCast.quorum Opcodes/Casts/TextObjectToTextPrimitiveCast.quorum Opcodes/Casts/IntegerToNumberCast.quorum Opcodes/Casts/TextPrimitiveToObjectCast.quorum Opcodes/Casts/BooleanPrimitiveToBooleanObjectCast.quorum Opcodes/Casts/ObjectToPrimitiveTextCast.quorum Opcodes/Casts/TextToIntegerCast.quorum Opcodes/Casts/BooleanToIntegerCast.quorum Opcodes/Casts/IntegerObjectToIntegerPrimitiveCast.quorum Opcodes/UnaryOpcode.quorum Opcodes/QuorumConstant.quorum Opcodes/Statements/LoopOpcode.quorum Opcodes/Statements/ReturnOpcode.quorum Opcodes/Statements/MeOpcode.quorum Opcodes/Statements/AlertOpcode.quorum Opcodes/Statements/ConditionalOpcode.quorum Opcodes/Statements/OutputOpcode.quorum Opcodes/Statements/AssignmentOpcode.quorum Opcodes/Statements/SayOpcode.quorum Opcodes/Expressions/BinaryOpcode.quorum Opcodes/Expressions/NegateUnaryOpcode.quorum Opcodes/Expressions/CreateObjectOpcode.quorum Opcodes/Expressions/InputOpcode.quorum Opcodes/Expressions/BinaryAndOrOpcode.quorum Opcodes/Expressions/FlipBooleanOpcode.quorum Opcodes/Expressions/BlankOpcode.quorum Opcodes/Expressions/ComparisonOpcode.quorum Opcodes/Expressions/ConcatenateOpcode.quorum Opcodes/Expressions/IsOpcode.quorum Opcodes/Actions/ActionOpcode.quorum Opcodes/Actions/ChainedActionCallOpcode.quorum Opcodes/Actions/ActionCallOpcode.quorum Opcodes/Errors/CheckDetectOpcode.quorum Opcodes/Errors/DetectBlockOpcode.quorum Opcodes/QuorumOpcode.quorum

echo "Copying Quorum"
robocopy Run/ ../Run /e /NFL /NDL /NJH /NJS /nc /ns /np
robocopy Build/ ../Build /e /NFL /NDL /NJH /NJS /nc /ns /np

echo "Recompiling Quorum Next in Quorum Next"
rmdir /s /q Run
rmdir /s /q Build

cd ../

echo "Finished."