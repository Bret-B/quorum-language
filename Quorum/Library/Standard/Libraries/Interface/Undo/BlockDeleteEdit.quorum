package Libraries.Interface.Undo

use Libraries.Interface.Controls.Blocks.CodeEditor
use Libraries.Interface.Controls.Blocks.Block
use Libraries.Containers.MultipleLineText
use Libraries.Interface.Events.TextChangeEvent
use Libraries.Containers.Array


class BlockDeleteEdit is Edit
    text value = ""
    CodeEditor editor = undefined
    integer characterIndex = -1

    action GetEditor returns CodeEditor
        return editor
    end

    action SetEditor(CodeEditor editor)
        me:editor = editor
    end

    action SetCharacterIndex(integer index)
        me:characterIndex = index
    end

    action GetCharacterIndex returns integer
        return characterIndex
    end

    action SetText(text deletedText)
        me:value = deletedText
    end

    action GetText returns text
        return value
    end

    action Undo
        TextChangeEvent event
        event:Initialize(editor, value,"", characterIndex)
        editor:OnTextChange(event, 0)

        editor:SetCode(editor:GetCode())
    end

    action Redo
        TextChangeEvent event
        event:Initialize(editor, "",value, characterIndex)
        editor:OnTextChange(event, 0)

        editor:SetCode(editor:GetCode())
    end


end