package Libraries.Interface.Controls.Charts

use Libraries.Containers.Array
use Libraries.Interface.Controls.Charts.Bar
use Libraries.Interface.Controls.Icon
use Libraries.Game.Graphics.Label

/*
The BarGroup class is a data structure that stores information for each 
group (array) of bars at a certain tick or by a certain factor marked 
by its label. This class also contains an Icon that is used for accessibility.

Attribute: Example

use Libraries.Interface.Controls.Charts.BarGroup
class Main
   action Main
      //make group
      BarGroup group
      //add a bar
      Bar bar
      group:AddBar(bar)
      //get a bar and set its value
      group:Get(0):SetValue(20.0)
   end
end
*/

class BarGroup
    Array<Bar> bars
    Icon icon
    Label groupName
    number totalValueOfGroup = 0.0
    number maxBarValue = 0

    action AddBar(Bar newBar)
        bars:Add(newBar)
        if newBar:GetValue() > maxBarValue
            maxBarValue = newBar:GetValue()
        end
        totalValueOfGroup = totalValueOfGroup + newBar:GetValue()
    end

    action GetName() returns text
        return groupName:GetName()
    end

    action SetName(text name)
        groupName:SetName(name)
        groupName:SetText(name)
    end

    action GetLabel() returns Label
        return groupName
    end

    action SetLabel(Label name)
        groupName = name
    end

    action GetIcon() returns Icon
        return icon
    end

    action SetIcon(Icon icon)
        me:icon = icon
    end

    action GetSize() returns integer
        return bars:GetSize()
    end

    action Get(integer i) returns Bar
        return bars:Get(i)
    end

    action Set(integer i, Bar bar)
        bars:Set(i, bar)
    end

    action GetValue() returns number
        return totalValueOfGroup
    end

    action SetValue(number value)
        totalValueOfGroup = value
    end

    action GetMaxBarValue returns number
        return maxBarValue
    end
end