package Libraries.Interface.Controls.Blocks

use Libraries.Interface.Forms.Page
use Libraries.Interface.Controls.Button
use Libraries.Interface.Behaviors.Blocks.BlockPaletteInsertBehavior
use Libraries.Interface.Pages.StackedRowPage


class BlockPalettePage is StackedRowPage

    BlockPalette palette = undefined

    action AddBlockPaletteItem(text name) returns Button
        BlockPaletteItem button
        button:SetPalette(palette)

        BlockPaletteInsertBehavior behave

        button:SetName(name)
        button:SetHorizontalLayoutMode(button:parent:Control:STANDARD)
        button:SetVerticalLayoutMode(button:parent:Control:STANDARD)
        button:SetToDefaultFontSize()
        button:SetBehavior(behave)
        button:SetBlocks(button:ParseToBlocks(name))
        button:SetFontSize(palette:GetFontSize())

        Add(button)
        return button
    end


    action GetEditor returns CodeEditor
        return palette:GetEditor()
    end

    action SetPalette(BlockPalette blockPalette)
        me:palette = blockPalette
    end

    action GetPalette returns BlockPalette
        return palette
    end

end