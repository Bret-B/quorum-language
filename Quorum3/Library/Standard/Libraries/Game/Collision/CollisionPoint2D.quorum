use Libraries.Compute.Vector2
use Libraries.Game.Collision.CollisionIdentifier2D

package Libraries.Game.Collision

/*
This class contains the one local collision point for a 2D collision from the
perspective of one of the objects that is involved in the collision. This class
also records what kind of impulses should be applied to the object to resolve
the collision.
This class is also known as manifold points. 
This class is used internally by LocalCollisionPoints2D.
*/
class CollisionPoint2D
    Vector2 localPoint          //the value of this vector depends on which shapes are involved in the collision
                                
                                //if this CollisionPoint would be from the reference of a circle, this would be the local center of the circle
                                //if this CollisionPoint would be from the reference of a polygon, this would be the clip point of the polygon
    number normalImpulse = 0    //the magnitude of the impulse that should be applied to separate the two objects in collision  
    number tangentImpulse = 0   //the magnitude of impulse that should be applied to simulate the friction between the two objects during collision
    CollisionIdentifier2D id    //identifies what type of collision is involved

    action Set(CollisionPoint2D point)
        me:localPoint:Set(point:localPoint)
        me:normalImpulse = point:normalImpulse
        me:tangentImpulse = point:tangentImpulse
        me:id:Set(point:id)
    end

    action SetLocalPoint(Vector2 localPoint)
        me:localPoint:Set(localPoint)
    end

    action GetLocalPoint returns Vector2
        return localPoint
    end

    action SetNormalImpulse(number normalImpulse)
        me:normalImpulse = normalImpulse
    end

    action GetNormalImpulse returns number
        return normalImpulse
    end

    action SetTangentImpulse(number tangentImpulse)
        me:tangentImpulse = tangentImpulse
    end

    action GetTangentImpulse returns number
        return tangentImpulse
    end

    action GetIdentifier returns CollisionIdentifier2D
        return id
    end
end