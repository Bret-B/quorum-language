package Libraries.Network

use Libraries.Containers.List
use Libraries.Containers.HashTable
//use Libraries.Data.Formats.JavaScriptObjectNotation

/**
 *
 * @author Patrick Daleiden
 */

class NetworkResponseEvent 
    private text webAddress = ""
    private integer statusCode = 0
    private text statusText = ""
    private text encoding = ""
    private integer contentLength = 0
    private text contentType = ""
    private text responseText = ""
    private HashTable<text, text> headers
//    text apparentEncoding = ""
//    List<text> headerLinks
//    List<NetworkResponseEvent> history
//    boolean isPermanentRedirect = false
//    boolean isRedirect = false
//    JavaScriptObjectNotation responseJSON = undefined
//    text responseRaw = ""   //File-like object representation of response (advanced). Requires stream=True
//    text savedLocalData = ""
//    number secondsElapsed = 0.0
//    PreparedRequest nextRequest // PreparedRequest object to which this is a response
    //iter_content    // Iterator for response data
    //iter_lines      // Iterator for response data

    action GetContentLength returns integer
        return contentLength
    end

    action GetContentType returns text
        return contentType
    end

    action GetEncoding returns text
        return encoding
    end

    action GetHeader(text key) returns text
        return headers:GetValue(key)
    end

    action GetHeaders returns HashTable<text, text>
        return headers
    end

    action GetResponseText returns text
        return responseText
    end

    action GetStatusText returns text
        return statusText
    end

    action GetStatusCode returns integer
        return statusCode
    end

    action GetWebAddress returns text
        return webAddress
    end

    action AddHeader(text name, text value)
        headers:Add(name, value)
    end

    action SetContentLength(integer length)
        me:contentLength = length
    end

    action SetContentType(text contentType)
        me:contentType = contentType
    end

    action SetEncoding(text encoding)
        me:encoding = encoding
    end

    action SetResponseText(text responseText)
        me:responseText = responseText
    end

    action SetStatusText(text statusText)
        me:statusText = statusText
    end

    action SetStatusCode(integer statusCode)
        me:statusCode = statusCode
    end

    action SetWebAddress(text webAddress)
        me:webAddress = webAddress
    end

    action IsOk returns boolean
        if statusCode < 400
            return true
        else
            return false
        end
    end

//    action GetApparentEncoding() returns text
//        return apparentEncoding
//    end

//    action GetHeaderLinks() returns List<text>
//        List<text> links
//        return links
//    end

//    action GetHistory() returns List<NetworkResponseEvent> 
//        return history
//    end

//    action GetNextRequest() returns PreparedRequest
//        return nextRequest
//    end

//    action GetResponseJSON() returns JavaScriptObjectNotation
//        return responseJSON
//    end

//    action GetResponseRaw() returns text
//        return responseRaw
//    end

//    action GetSavedLocalData() returns text
//        return savedLocalData
//    end

//    action GetSecondsElapsed() returns number
//        return secondsElapsed
//    end

//    action IsPermanentRedirect() returns boolean
//        return isPermanentRedirect
//    end

//    action IsRedirect() returns boolean
//        return isRedirect
//    end

//    action SetApparentEncoding(text apparentEncoding)
//        me:apparentEncoding = apparentEncoding
//    end

//    action SetHeaders(text headers)
//        me:headers = headers
//    end

//    action SetHeaderLinks(List<text> headerLinks)
//        me:headerLinks = headerLinks
//    end

//    action SetHistory(List<NetworkResponseEvent> history)
//        me:history = history
//    end

//    action SetNextRequest(PreparedRequest nextRequest)
//        me:nextRequest = nextRequest
//    end

//    action SetResponseJSON(JavaScriptObjectNotation response)
//        me:responseJSON = response
//    end

//    action SetResponseRaw(text responseRaw)
//        me:responseRaw = responseRaw
//    end

//    action SetSavedLocalData(text savedLocalData)
//        me:savedLocalData = savedLocalData
//    end

//    action SetSecondsElapsed(number secondsElapsed)
//        me:secondsElapsed = secondsElapsed
//    end


//    action SetIsPermanentRedirect(boolean isPermanentRedirect)
//        me:isPermanentRedirect = isPermanentRedirect
//    end

//    action SetIsRedirect(boolean isRedirect)
//        me:isRedirect = isRedirect
//    end

end